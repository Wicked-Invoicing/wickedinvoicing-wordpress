(()=>{"use strict";const e=window.wp.blocks,i=window.wp.i18n,n=window.wp.blockEditor,o=window.wp.components,t=window.ReactJSXRuntime,a=o.__experimentalGradientPicker,l=[{value:"stripe",label:"Stripe"},{value:"paypal",label:"PayPal"}],c=[{name:"Primary",color:"#111827"},{name:"Accent",color:"#2563eb"},{name:"Success",color:"#16a34a"},{name:"Danger",color:"#dc2626"}];(0,e.registerBlockType)("wicked-invoicing/invoice-payment",{edit:function({attributes:e,setAttributes:r}){const{enabledProcessors:d=[],buttonVariant:g="solid",buttonShape:s="rounded",buttonSize:u="md",buttonAlign:_="right",buttonBgColor:b="",buttonTextColor:v="",buttonGradient:k="",backgroundImageId:h=0,backgroundImageUrl:m="",backgroundImageWidth:w=0,backgroundImageHeight:p=0}=e,x=["wi-payment-buttons",`wi-button-variant-${g}`,`wi-button-shape-${s}`,`wi-button-size-${u}`,`wi-button-align-${_}`].join(" "),j={...b?{"--wi-btn-bg":b}:{},...v?{"--wi-btn-text":v}:{},...k?{"--wi-btn-gradient":k}:{},...m?{backgroundImage:`url(${m})`,backgroundSize:"cover",backgroundPosition:"center"}:{}},C=(0,n.useBlockProps)({className:x,style:j}),y=d.length>0?l.filter(e=>d.includes(e.value)):l;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.InspectorControls,{children:[(0,t.jsx)(o.PanelBody,{title:(0,i.__)("Payment Methods","wicked-invoicing"),initialOpen:!0,children:l.map(e=>(0,t.jsx)(o.CheckboxControl,{label:e.label,checked:d.includes(e.value),onChange:()=>(e=>{const i=d.includes(e);r({enabledProcessors:i?d.filter(i=>i!==e):[...d,e]})})(e.value),__nextHasNoMarginBottom:!0},e.value))}),(0,t.jsxs)(o.PanelBody,{title:(0,i.__)("Button Style","wicked-invoicing"),initialOpen:!1,children:[(0,t.jsx)(o.SelectControl,{label:(0,i.__)("Variant","wicked-invoicing"),value:g,options:[{label:(0,i.__)("Solid","wicked-invoicing"),value:"solid"},{label:(0,i.__)("Outline","wicked-invoicing"),value:"outline"},{label:(0,i.__)("Ghost","wicked-invoicing"),value:"ghost"}],onChange:e=>r({buttonVariant:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,t.jsx)(o.SelectControl,{label:(0,i.__)("Size","wicked-invoicing"),value:u,options:[{label:(0,i.__)("Small","wicked-invoicing"),value:"sm"},{label:(0,i.__)("Medium","wicked-invoicing"),value:"md"},{label:(0,i.__)("Large","wicked-invoicing"),value:"lg"}],onChange:e=>r({buttonSize:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,t.jsx)(o.SelectControl,{label:(0,i.__)("Alignment","wicked-invoicing"),value:_,options:[{label:(0,i.__)("Left","wicked-invoicing"),value:"left"},{label:(0,i.__)("Center","wicked-invoicing"),value:"center"},{label:(0,i.__)("Right","wicked-invoicing"),value:"right"}],onChange:e=>r({buttonAlign:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,t.jsx)(o.SelectControl,{label:(0,i.__)("Shape","wicked-invoicing"),value:s,options:[{label:(0,i.__)("Rounded","wicked-invoicing"),value:"rounded"},{label:(0,i.__)("Pill","wicked-invoicing"),value:"pill"},{label:(0,i.__)("Square","wicked-invoicing"),value:"square"}],onChange:e=>r({buttonShape:e}),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})]}),(0,t.jsxs)(o.PanelBody,{title:(0,i.__)("Button Colors","wicked-invoicing"),initialOpen:!1,children:[(0,t.jsx)("p",{children:(0,i.__)("Background","wicked-invoicing")}),(0,t.jsx)(o.ColorPalette,{colors:c,value:b,onChange:e=>r({buttonBgColor:e||""})}),(0,t.jsx)("p",{children:(0,i.__)("Text","wicked-invoicing")}),(0,t.jsx)(o.ColorPalette,{colors:c,value:v,onChange:e=>r({buttonTextColor:e||""})}),a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:(0,i.__)("Gradient (optional)","wicked-invoicing")}),(0,t.jsx)(a,{value:k,onChange:e=>r({buttonGradient:e||""})})]})]}),(0,t.jsx)(o.PanelBody,{title:(0,i.__)("Background Image","wicked-invoicing"),initialOpen:!1,children:(0,t.jsx)(n.MediaUploadCheck,{children:(0,t.jsx)(n.MediaUpload,{onSelect:e=>{r({backgroundImageId:e.id,backgroundImageUrl:e.url,backgroundImageWidth:e.width||0,backgroundImageHeight:e.height||0})},allowedTypes:["image"],value:h||void 0,render:({open:e})=>(0,t.jsx)("div",{children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"wi-payment-bg-preview",children:[(0,t.jsx)("img",{src:m,alt:"",style:{maxWidth:"100%",height:"auto",display:"block",borderRadius:"4px"}}),w&&p&&(0,t.jsxs)("p",{children:[(0,i.__)("Original size:","wicked-invoicing")," ",w,"Ã—",p," px"]})]}),(0,t.jsx)(o.Button,{variant:"primary",onClick:e,style:{marginTop:"8px",marginRight:"8px"},children:(0,i.__)("Change image","wicked-invoicing")}),(0,t.jsx)(o.Button,{variant:"secondary",onClick:()=>r({backgroundImageId:0,backgroundImageUrl:"",backgroundImageWidth:0,backgroundImageHeight:0}),children:(0,i.__)("Remove image","wicked-invoicing")})]}):(0,t.jsx)(o.Button,{variant:"primary",onClick:e,children:(0,i.__)("Select background image","wicked-invoicing")})})})})})]}),(0,t.jsx)("div",{...C,children:y.map(e=>(0,t.jsxs)("button",{type:"button",className:"wi-payment-button",children:[(0,i.__)("Pay with ","wicked-invoicing"),e.label]},e.value))})]})},save:()=>null})})();